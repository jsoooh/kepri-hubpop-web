<div class="message_area">
	<div class="msg_bg"></div>
	<div class="msg_txt"><span>‘APP 만들기’를 통해 컨테이너 기반의 APP 실행환경을 생성할 수 있습니다. </span></div>
</div>

<form name="{{contents.formName}}" method="POST" novalidate>
<div class="panel_area">
	<div class="panel_box pn_l">
		<div class="pn_head">
			<h4 class="pnh_tit">APP 만들기</h4>
		</div>
		<div class="pn_body">
			<span class="sm_txt">* 는 필수입력 사항입니다.</span>
			<ul class="form_list">
				<li>
					<div class="pnb_tit">
						<i class="i_star"></i> APP 이름<span class="ico_info"></span>
					</div>
					<input type="text" class="form-control" maxlength="50" placeholder="APP 이름을 입력하세요." id="appName" name="appName" ng-model="contents.appPushData.appName" ng-change="contents.appPushData.domainFirstName = contents.appPushData.appName" validation="min_len:3|max_len:50|required">
				</li>
				<li>
					<div class="pnb_tit">
						<i class="i_star"></i> APP 도메인<span class="ico_info"></span>
					</div>
					<div class="app-form-two">
						<div class="two_box w60">
							<input type="text" class="form-control" maxlength="50" id="domainFirstName" name="domainFirstName" ng-model="contents.appPushData.domainFirstName" ng-change="contents.hostDup = false" validation="alpha_dash|min_len:3|max_len:50|required" placeholder="APP 도메인을 입력하세요.">
						</div>
						<div class="two_box">
							<select name="" title="검색 구분 선택" id="domainName" name="domainName" ng-model="contents.sltDomainName">
								<option ng-repeat="domainItem in contents.domains" value="{{ domainItem.name }}">{{ domainItem.name }}</option>
							</select>
						</div>
					</div>
					<div ng-if="contents.appPushForm01.domainFirstName.$touched && contents.appPushForm01.domainFirstName.$invalid" class="validation validation-domainFirstName text-danger"></div>
					<div ng-if="contents.hostDup" class="validation text-danger"><span class="validation-icon"></span>이미 사용 중인 도메인입니다.</div>
				</li>
				<li>
					<div class="pnb_tit">
						<i class="i_star"></i> APP 유형<span class="ico_info"></span>
					</div>
					<div class="mt20">
						<div class="radio radio-inline">
							<input type="radio" name="pushType" id="app-radio1-1" value="GENERAL" ng-model="contents.appPushData.pushType" >
							<label for="app-radio1-1" class="label">빌드팩(Buildpack)</label>
						</div>
						<div class="radio radio-inline">
							<input type="radio" name="pushType" id="app-radio1-2" value="DOCKER" ng-model="contents.appPushData.pushType">
							<label for="app-radio1-2" class="label">도커(Docker) 이미지 기반</label>
						</div>
					</div>
				</li>
				<li ng-if="contents.appPushData.pushType != 'DOCKER'">
					<div class="pnb_tit">
						<i class="i_star"></i> 빌드팩(Buildpack) 선택<span class="ico_info"></span>
					</div>
					<div class="scroll-pane">
						<ul class="ul-list1">
							<li ng-repeat="(key, buildpackItem) in contents.portalBuildpacks track by $index">
								<div class="radio1 radio-inline">
								   <input type="radio" id="buldpack_{{ buildpackItem.id }}" name="buldpack" value="{{ buildpackItem.id }}" ng-model="contents.sltBuildpackId" ng-change="contents.changePortalBuildpack();" />
								   <label for="buldpack_{{ buildpackItem.id }}" class="label">
									<img class="im" ng-if="buildpackItem.iconImage != null" ng-src="data:{{ buildpackItem.iconImage.contentType }}; base64, {{ buildpackItem.iconImage.image }}" width="40" height="40">
									<img class="im" ng-if="buildpackItem.iconImage == null" src="img/default_image.png" width="40" height="40">
								   </label>
								</div>
								<p class="label-txt">{{ buildpackItem.name }}</p>
								<input type="hidden" ng-if="$last" ng-init="contents.scrollPane()">
							</li>
						</ul>
					</div>	
				</li>
				<li ng-if="contents.appPushData.pushType == 'DOCKER'">
					<p class="pnb_tit">도커(Docker) 이미지 정보를 입력해 주세요. <i class="i_star"></i></p>
					<input type="text" maxlength="100" name="dockerImage" id="dockerImage" ng-model="contents.appPushData.dockerImage" class="form-control" placeholder="예 : cloudfoundry/lattice-app" validation="required">
				</li>
				
				<li ng-if="contents.appPushData.pushType != 'DOCKER'">
					<div class="pnb_tit" >
						APP 실행용 파일 업로드(선택)<span class="ico_info"></span>
					</div>
					<!-- 20181119 연구원 기능제한으로 인한 구현제거 sg0730 
						<div class="mt20">
						<div class="radio radio-inline">
							20181119 신규 VALUE 세팅 필요 sg0730 START
							<input type="radio" name="radio00" id="radio00-3" value="">
							<label for="radio00-3" class="label">실행파일 업로드</label>
						</div>
						<div class="radio radio-inline">
							<input type="radio" name="radio00" id="radio00-4" value="">
							<label for="radio00-4" class="label">소스코드 업로드</label>
							20181119 신규 VALUE 세팅 필요 sg0730 END
						</div>
					</div> -->
					<div class="fileUploadWrap mt20">
						<div class="bootstrap-filestyle input-group">
							<input type="hidden" name="contents.appFileName" ng-model="contents.appFileItem.file.name" style="display: none;" />
							<input type="text" id="userfile" class="form-control" name="userfile" style="width:909px;" readonly value="{{ contents.appFileItem.file.name }}">
							<span class="group-span-filestyle input-group-btn" tabindex="0">
								<input nv-file-select="" uploader="contents.uploader" id="appFileInput" name="appFileInput" type="file" class="form-control" style="display: none;" accept=".war, .jar, .zip" >
								<label class="btn btn-default " ng-click="main.fileSelectBtnClick($event);">
									<span class="btn btn-md btn-color1" >파일찾기</span>
								</label>
							</span>
						</div>
						<span class="mt10" ng-if="contents.appFileErrorMessage" style="color: red;" dynamic-template="contents.appFileErrorMessage"></span>
					</div>
				</li>
			</ul>
			<!-- 사양설정 -->
			<div class="pnb_box type2 cToggle">
				<div class="pnb_bx_hd">
					<span class="hd_tit">실행환경 사양설정</span>
					<button type="button" name="button" class="btn_add_toggle" title="열고/닫기" ng-click="main.pnbBoxToggleChange($event);"><span class="ico_arw_sm">열고/닫기</span></button>
				</div>
				<div class="pnb_bx_cnt" ng-show="main.visible">
				<!-- <div class="pnb_bx_cnt" > -->
					<ul class="cnt_sliderWrap">
						<li>
							<div class="tit"><span>인스턴스 개수</span></div>
							<div class="slider_area">
								<div class="disk_area color2">
									<div class="disk_box">
										<div class="rangeWrap type2">
											<span class="s_txt">최대 {{contents.insSlider.options.ceil}}개</span>
											<div class="range_box">
												<div class="ico_minus">
													<button type="button" name="button" class="btn" title="감소" ng-click="contents.minValCheck(1);" ><span>감소</span></button>
												</div>
												<div class="rzslider">
													<rzslider rz-slider-model="contents.defaultSet.instances" rz-slider-options="contents.insSlider.options"></rzslider>
												</div>
												<div class="ico_plus">
													<!-- <button type="button" name="button" class="btn" title="minus" ng-click="if(contents.defaultSet.instances <= contents.insSlider.options.ceil )contents.defaultSet.instances = (contents.defaultSet.instances + contents.insSlider.options.step);"><span>증가</span></button> -->
													<button type="button" name="button" class="btn" title="증가" ng-click="contents.maxValCheck(1);"><span>증가</span></button>
												</div>
											</div>
										
										</div>
									</div>
								</div>
							</div>
						</li>
						
						<li>
							<div class="tit"><span>메모리 용량</span></div>
							<div class="slider_area">
								<div class="disk_area">
									<div class="disk_box">
										<div class="rangeWrap type2">
											<span class="s_txt">최대  {{ (contents.memorySlider.options.ceil < 1024) ?  (contents.memorySlider.options.ceil|number:0)  : (contents.memorySlider.options.ceil/1024|number:2).replace('.00', '').replace('.0', '')}}GB</span>
											<div class="range_box">
												<div class="ico_minus">
													<button type="button" name="button" class="btn" title="감소" ng-click="contents.minValCheck(2);" ><span>감소</span></button>
												</div>
												<div class="rzslider"><rzslider rz-slider-model="contents.defaultSet.memory" rz-slider-options="contents.memorySlider.options"></rzslider></div>
												<div class="ico_plus">
													<button type="button" name="button" class="btn" title="증가" ng-click="contents.maxValCheck(2);"><span>증가</span></button>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</li>
						
						<li>
							<div class="tit"><span>디스크 용량</span></div>
							<div class="slider_area">
								<div class="disk_area color3">
									<div class="disk_box">
										<div class="rangeWrap type2">
											<span class="s_txt">최대 {{ (contents.diskQuotaSlider.options.ceil < 1024) ?  (contents.diskQuotaSlider.options.ceil|number:0)  : (contents.diskQuotaSlider.options.ceil/1024|number:2).replace('.00', '').replace('.0', '')}}GB</span>
											<div class="range_box">
												<div class="ico_minus">
													<button type="button" name="button" class="btn" title="감소" ng-click="contents.minValCheck(3);" ><span>감소</span></button>
												</div>
												<div class="rzslider"><rzslider rz-slider-model="contents.defaultSet.diskQuota" rz-slider-options="contents.diskQuotaSlider.options"></rzslider></div>
												<div class="ico_plus">
													<button type="button" name="button" class="btn" title="증가" ng-click="contents.maxValCheck(3);" ><span>증가</span></button>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<!-- //사양설정 -->
		</div>
		<div class="pn_footer">
			<div class="btn-btm mgt0">
				<button type="button" name="button" class="btn btn-color1 btn-md" ng-click="contents.appPush();">APP 생성</button>
				<button type="button" name="button" class="btn btn-color2 btn-md" ng-click="main.goToPage('/paas/apps')">취소</button>
			</div>
		</div>
	</div>
	<div class="panel_box pn_r">
		<div class="pn_head">
			<h4 class="pnh_tit ico04">APP 기본정보</h4>
		</div>
		<div class="pn_body">
			<div class="s_cont_box">
				<ul>
					<li>
						<span class="s_tit">APP 이름</span>
						<span class="s_txt">{{contents.appPushData.appName}}</span>
					</li>
					<li>
						<span class="s_tit">APP 도메인</span>
						<span class="s_txt">{{contents.appPushData.domainFirstName}}.{{contents.sltDomainName}}</span>
					</li>
					<li>
						<span class="s_tit">APP 유형</span>
						<span class="s_txt" ng-if="contents.appPushData.pushType == 'GENERAL'">빌드팩(Buildpack)</span>
						<span class="s_txt" ng-if="contents.appPushData.pushType == 'DOCKER'">도커(Docker)</span>
					</li>
					<li ng-if="contents.appPushData.pushType == 'GENERAL'">
						<span class="s_tit">빌드팩 정보<span class="ico_info"></span></span>
						<div class="s_inner_cont">
							<dl>
								<dt>종류 :</dt>
								<dd>{{contents.sltPortalBuildpack.name}} 빌드팩</dd>
								<dt>버전 :</dt>
								<dd>{{contents.sltBuildpackVersion.versionName}}</dd>
								<dt>주요구성 SW</dt>
							</dl>
							<pre>
								{{contents.sltBuildpackVersion.description}}
							</pre>
						</div>
					</li>
				</ul>
			</div>
		</div>
		
		<div class="pn_head brdt" ng-if="contents.appPushData.pushType == 'GENERAL'">
			<h4 class="pnh_tit ico06">APP 실행 소스코드</h4>
		</div>
		<div class="pn_body" ng-if="contents.appPushData.pushType == 'GENERAL'">
			<div class="s_cont_box">
				<ul>
					<li>
						<div class="s_inner_cont">
							<p class="txt" >{{ contents.appFileItem.localFullFileName }}<!-- D:/dev/demand.war --></p>
						</div>
					</li>
				</ul>
			</div>
		</div>
		
		<div class="pn_head brdt">
			<h4 class="pnh_tit ico05">APP 실행환경 사양</h4>
		</div>
		<div class="pn_body">
			<div class="s_cont_box">
				<ul>
					<li>
						<div class="s_inner_cont">
							<div class="innr_tbl">
								<table>
									<colgroup>
										<col width="30" />
										<col width="30" />
										<col width="30" />
									</colgroup>
									<thead>
										<tr>
											<th>인스턴스</th>
											<th>메모리</th>
											<th>디스크</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>{{contents.defaultSet.instances}} 개</td>
											<td>
												{{ (contents.defaultSet.memory < 1024) ?  (contents.defaultSet.memory|number:0)  : (contents.defaultSet.memory/1024|number:2).replace('.00', '').replace('.0', '')}}<em>{{ (contents.defaultSet.memory < 1024) ?  'MB' : 'GB'}}</em></span>
											</td>
											<td>
												{{ (contents.defaultSet.diskQuota < 1024) ?  (contents.defaultSet.diskQuota|number:0)  : (contents.defaultSet.diskQuota/1024|number:2).replace('.00', '').replace('.0', '')}}<em>{{ (contents.defaultSet.diskQuota < 1024) ?  'MB' : 'GB'}}</em></span>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</li>
				</ul>
			</div>
			<div class="btn-btm">
				<button type="button" name="button" class="btn_tutorial" onclick="location.href='#/tutorial/2';">서비스 튜토리얼 바로가기</button>
			</div>
		</div>
	</div>
</div>